import{h as i,f as v,g as b,i as o,F as x,j as D,o as r,k as s,t as u,l as p,m as h,w as P,E as _,n as w,p as U,q as B}from"./vendor.DND3zO1l.js";import{_ as V}from"./index.DXKayfrd.js";const z=[{id:1,author:"暖心",content:"暖心pro, 你很牛吗？",time:"2024-09-25 18:00",replies:[{id:1,author:"用户B",to:"暖心",content:"小母牛去南极--牛逼到了极点",time:i().subtract(1,"days").format("YYYY-MM-DD HH:mm:ss")},{id:2,author:"用户C",to:"用户B",content:"爽子哥表示真牛",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:3,author:"用户D",to:"暖心",content:"小母牛来月经--血牛逼",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:4,author:"用户G",to:"用户E",content:"强哥觉得真牛",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:5,author:"用户K",to:"暖心",content:"6666",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:6,author:"用户I",to:"用户H",content:"太酷啦",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:7,author:"用户G",to:"用户B",content:"🐮🍺",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:8,author:"用户D",to:"暖心",content:"绝了",time:i().subtract(3,"days").format("YYYY-MM-DD HH:mm:ss")},{id:9,author:"用户K",to:"用户H",content:"",time:"2024-09-25 17:31:56"}],isExpanded:!1},{id:2,author:"李某",content:"你什么身份？",time:"2024-09-25 19:00",replies:[{id:1,author:"用户L",to:"李某",content:"三岁母牛不下崽--牛逼坏了",time:"2024-09-23 10:21:32"}],isExpanded:!1}],G={class:"chat-area"},I={class:"avatar"},K={class:"message"},L={class:"message-content"},$={class:"content"},j={class:"message-conOption"},q=["onClick"],F={key:0,class:"replies"},O={class:"reply-meta"},T=["onClick"],A={class:"message-actions"},J={key:0},N={key:1},Q=["onClick"],R={key:1,class:"reply-box"},Z=V({__name:"index",setup(S){const Y=v(z);Y.value.forEach(n=>{n.isExpanded=!1,n.currentPage=1});const d=v(""),a=v({message:null,to:null}),m=v(!1),H=b(()=>a.value.to?`回复 @${a.value.to}:`:`回复 ${a.value.message.author}:`),M=n=>{const l=8*(n.currentPage-1),g=l+8;return n.replies.slice(l,g)},y=(n,l=null)=>{a.value.message===n&&m.value&&a.value.to===l?(m.value=!1,a.value={message:null,to:null},d.value=""):(a.value={message:n,to:l},m.value=!0,d.value="")},f=()=>{if(d.value.trim()){const n={id:Date.now(),author:"暖心pro",to:a.value.to||a.value.message.author,content:d.value,time:i().format("YYYY-MM-DD HH:mm:ss")};a.value.message.replies.unshift(n),a.value.message.isExpanded||(a.value.message.isExpanded=!0),a.value.message.currentPage=1,d.value="",a.value={message:null,to:null},m.value=!1}};return(n,l)=>{const g=_,k=w,E=U;return r(),o("div",G,[(r(!0),o(x,null,D(Y.value,e=>(r(),o("div",{key:e.id,class:"chart-content"},[s("div",I,u(e.author),1),s("div",K,[s("div",L,[s("div",$,u(e.content),1),s("div",j,[s("span",null,u(e.time),1),s("span",{onClick:t=>y(e)},"回复",8,q)])]),e.isExpanded?(r(),o("div",F,[(r(!0),o(x,null,D(M(e),t=>(r(),o("div",{key:t.id,class:"reply-item"},[s("span",null,u(t.author)+" 回复 "+u(t.to)+"："+u(t.content),1),s("div",O,[s("span",null,u(t.time),1),s("span",{class:"replayTwoLevel",onClick:c=>y(e,t.author)},"回复",8,T)])]))),128))])):p("",!0),s("div",A,[e.replies.length>0?(r(),o("span",J," 共 "+u(e.replies.length)+" 条回复， ",1)):p("",!0),e.replies.length>8&&e.isExpanded?(r(),o("div",N,[h(g,{layout:"prev, pager, next","page-size":8,total:e.replies.length,"current-page":e.currentPage,"onUpdate:currentPage":t=>e.currentPage=t,onCurrentChange:t=>(c=>C=>{c.currentPage=C})(e),size:"large","hide-on-single-page":!0,"prev-text":"上一页","next-text":"下一页"},null,8,["total","current-page","onUpdate:currentPage","onCurrentChange"])])):p("",!0),e.replies.length>0?(r(),o("span",{key:2,class:"isExpand",onClick:t=>(c=>{c.isExpanded=!c.isExpanded,c.isExpanded&&(c.currentPage=1)})(e)},u(e.isExpanded?"收起":"点击查看"),9,Q)):p("",!0)]),a.value.message===e&&m.value?(r(),o("div",R,[h(k,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value=t),placeholder:H.value,type:"textarea",maxlength:"50","show-word-limit":""},null,8,["modelValue","placeholder"]),h(E,{type:"primary",onClick:f,style:{height:"100%"}},{default:P(()=>l[1]||(l[1]=[B(" 发送 ")])),_:1})])):p("",!0)])]))),128))])}}},[["__scopeId","data-v-86252040"]]);export{Z as default};
